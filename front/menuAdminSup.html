<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Suplente</title>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-app.js";
    import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyCw8ae27O1Bg8MNBZDKrB55jciUld6plOc",
      authDomain: "becauaqbd.firebaseapp.com",
      projectId: "becauaqbd",
      storageBucket: "becauaqbd.firebasestorage.app",
      messagingSenderId: "853997069826",
      appId: "1:853997069826:web:50e1a3812626cf4255a91b"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    
    window.firebaseApp = app;
    window.firebaseDB = db;
    window.firebaseModules = { collection, query, where, getDocs };
  </script>

  <style>
    :root {
      --azul: #44658a;
      --fondo: #e9fdfd;
      --caja: white;
      --borde-radio: 18px;
    }

    body {
      margin: 0;
      background: var(--fondo);
      font-family: "Segoe UI", sans-serif;
    }

    .header {
      background-color: var(--azul);
      color: white;
      padding: 18px 30px;
      border-bottom-left-radius: 45px;
      border-bottom-right-radius: 45px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .user-icon {
      width: 55px;
      height: 55px;
      background: #b9ecf5;
      border-radius: 50%;
      display: grid;
      place-items: center;
      font-size: 32px;
      color: var(--azul);
    }

    .home-icon {
      width: 50px;
      height: 50px;
      background: var(--azul);
      border: 2px solid white;
      border-radius: 50%;
      display: grid;
      place-items: center;
      cursor: pointer;
    }

    .content {
      padding: 25px;
      margin-bottom: 90px;
    }

    .section {
      display: none;
      background: var(--caja);
      padding: 20px;
      border-radius: var(--borde-radio);
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .active {
      display: block;
    }

    .footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: space-around;
      background: var(--azul);
      padding: 12px;
      border-top-left-radius: 25px;
      border-top-right-radius: 25px;
    }

    .footer button {
      background: none;
      border: none;
      color: white;
      font-size: 1rem;
      cursor: pointer;
    }

    .footer button:hover {
      text-decoration: underline;
    }
  </style>

</head>

<body>

  <div class="header">
    <div class="user-info">
      <div class="user-icon">üë§</div>
      <div>
        <div><strong id="adminName">Admin suplente: Cargando...</strong></div>
        <div id="adminId">ID-usuario: Cargando...</div>
      </div>
    </div>
    <div class="home-icon" onclick="showSection('inicio')">üè†</div>
  </div>

  <div class="content">

    <!--- home -->
    <div id="inicio" class="section active">
      <h2>Bienvenido</h2>
      <p>Seleccione una opci√≥n del men√∫ inferior.</p>
    </div>

    <!--- ############# vista de Validaci√≥n de Aplicantes -->
    <div id="validacion" class="section">
      <h2>Validaci√≥n de Aplicantes</h2>
      <p>Seleccione una opci√≥n del men√∫ inferior.</p>
    </div> <!-- ############# fin ############# -->

    <!--- ############# vista de Seguimiento de Aplicante -->
    <div id="seguimiento" class="section">
      <h2>Seguimiento de Aplicantes</h2>
      <p>Seleccione una opci√≥n del men√∫ inferior.</p>
    </div> <!-- ############# fin ############# -->

    <!--- ############# vista de Publicaci√≥n de Resultados -->
    <div id="publicacion" class="section">
      <h2>Publicaci√≥n de Resultados</h2>
      <p>Seleccione una opci√≥n del men√∫ inferior.</p>
    </div> <!-- ############# fin ############# -->

    <!--- ############# vista de Registro de Preguntas -->
    <div id="preguntas" class="section">
      <h2>Registro de Preguntas</h2>
      <p>Seleccione una opci√≥n del men√∫ inferior.</p>
    </div> <!-- ############# fin ############# -->

    <!--- ############# vista de Acerca de -->
    <div id="acerca" class="section">
      <h2>Acerca</h2>
      <div class="content">
        <p>
          La Aplicaci√≥n de Becas UAQ es un proyecto desarrollado como parte del Proyecto Final de Redes de la Facultad de Inform√°tica de la Universidad Aut√≥noma de Quer√©taro, dentro del programa educativo de Ingenier√≠a de Software.
        </p>

        <p>
          Su objetivo principal es brindar una soluci√≥n digital que facilite la gesti√≥n y administraci√≥n de informaci√≥n relacionada con becas estudiantiles, permitiendo a la universidad mantener procesos ordenados, accesibles y eficientes tanto para los estudiantes como para los administradores del sistema.
        </p>

        <p>
          Este proyecto surge como respuesta a una problem√°tica com√∫n: la desorganizaci√≥n en los procesos de becas y la falta de comunicaci√≥n clara sobre el estado de las solicitudes. La aplicaci√≥n ofrece una plataforma donde los alumnos pueden consultar el estado de sus entrevistas, documentos y resultados, mientras que los administradores pueden gestionar convocatorias, validar aplicantes y controlar el flujo completo del proceso.
        </p>

        <p>
          Para su desarrollo se utilizaron tecnolog√≠as como <b>HTML, CSS, JavaScript, PHP y XAMPP</b>, adem√°s de herramientas de dise√±o como <b>Figma</b> para la creaci√≥n de prototipos y <b>GitHub</b> para la colaboraci√≥n del equipo durante el desarrollo.
        </p>

        <p>
          El sistema plantea diferentes vistas seg√∫n el tipo de usuario: estudiantes, administradores suplentes y administradores principales, cada uno con permisos y funciones espec√≠ficas.
        </p>

        <p>
          La aplicaci√≥n est√° dise√±ada como un proyecto funcional, modular y escalable, con la capacidad de crecer y adaptarse a necesidades reales dentro del entorno universitario.
        </p>
      </div>
    </div> <!-- ############# fin ############# -->

  </div>

  <div class="footer">
    <button onclick="showSection('validacion')">Validaci√≥n</button>
    <button onclick="showSection('seguimiento')">Seguimiento</button>
    <button onclick="showSection('publicacion')">Publicaci√≥n</button>
    <button onclick="showSection('preguntas')">Preguntas</button>
    <button onclick="showSection('acerca')">Acerca</button>
  </div>

  <script>
    function showSection(id) {
      document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    // Cargar datos del administrador suplente desde Firebase
    async function cargarDatosAdmin() {
      try {
        // Verificar que el usuario est√© logueado
        const usuarioStorage = localStorage.getItem('usuario');
        
        if (!usuarioStorage) {
          console.log('No hay usuario en localStorage, redirigiendo...');
          window.location.href = 'index.html';
          return;
        }

        const usuarioData = JSON.parse(usuarioStorage);
        console.log('Datos del admin suplente desde localStorage:', usuarioData);

        // Actualizar la interfaz con los datos del admin
        const adminNameElement = document.getElementById('adminName');
        const adminIdElement = document.getElementById('adminId');

        if (usuarioData.nombre) {
          adminNameElement.textContent = `Admin suplente: ${usuarioData.nombre}`;
        } else {
          adminNameElement.textContent = 'Admin suplente';
        }

        if (usuarioData.id) {
          adminIdElement.textContent = `ID: ${usuarioData.id}`;
        } else {
          adminIdElement.textContent = 'ID-usuario';
        }

        console.log('‚úÖ Datos del admin suplente cargados correctamente');

      } catch (error) {
        console.error('‚ùå Error al cargar datos del admin:', error);
        
        // En caso de error, mostrar valores por defecto
        document.getElementById('adminName').textContent = 'Admin suplente';
        document.getElementById('adminId').textContent = 'ID-usuario';
      }
    }

    // Ejecutar cuando la p√°gina cargue
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üîÑ Cargando datos del admin suplente...');
      cargarDatosAdmin();
    });

    // Verificaci√≥n de autenticaci√≥n al cargar la p√°gina
    if (!localStorage.getItem('usuario')) {
      console.log('‚ùå No autenticado, redirigiendo a login...');
      window.location.href = 'index.html';
    }
  </script>

</body>
</html>